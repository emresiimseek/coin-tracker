import { useCallback, useEffect, useState } from "react";
import axios from "axios";
import { DataGrid, GridColDef, GridRowSelectionModel } from "@mui/x-data-grid";
import {
  BinanceCoins,
  ParibuRoot,
  ParibuCoin,
  CombinedCoin,
} from "./types/Coin";

const BINANCE_WEBSOCKET_URL = "wss://stream.binance.com/ws";
const FS_BINANCE_WEBSOCKET_URL = "wss://fstream.binance.com/ws";
const PARIBU_API_URL = "https://www.paribu.com/ticker";

function CoinTracker() {
  const [binanceCoins, setBinanceCoins] = useState<BinanceCoins[]>([]);
  const [usdttry, setUsdttry] = useState<BinanceCoins | null>(null);
  const [paribusCoins, setParibuCoins] = useState<ParibuCoin[]>([
    {
      symbol: "1INCH_TL",
      lowestAsk: 10.14,
      highestBid: 9.9,
      low24hr: 9.97,
      high24hr: 10.77,
      avg24hr: 10.25,
      volume: 156925.41,
      last: 9.97,
      change: -0.44,
      percentChange: -4.23,
      chartData: [],
      allData: [9.97, 9.97],
    },
    {
      symbol: "AAVE_TL",
      lowestAsk: 1440.08,
      highestBid: 1414.35,
      low24hr: 1407.77,
      high24hr: 1473.35,
      avg24hr: 1441.07,
      volume: 299.0074,
      last: 1413.98,
      change: -59.37,
      percentChange: -4.03,
      chartData: [],
      allData: [1413.98, 1413.98],
    },
    {
      symbol: "ACM_TL",
      lowestAsk: 49.96,
      highestBid: 49.3,
      low24hr: 47.05,
      high24hr: 52.23,
      avg24hr: 49.54,
      volume: 146967.469,
      last: 49.31,
      change: 0.06,
      percentChange: 0.12,
      chartData: [],
      allData: [49.31, 49.31],
    },
    {
      symbol: "ADA_TL",
      lowestAsk: 7.621,
      highestBid: 7.62,
      low24hr: 7.312,
      high24hr: 7.635,
      avg24hr: 7.504,
      volume: 1142421.6,
      last: 7.62,
      change: -0.001,
      percentChange: -0.01,
      chartData: [],
      allData: [7.62, 7.62],
    },
    {
      symbol: "ADA_USDT",
      lowestAsk: 0.387,
      highestBid: 0.3823,
      low24hr: 0.3715,
      high24hr: 0.3959,
      avg24hr: 0.3821,
      volume: 71064.6,
      last: 0.3878,
      change: 0.0098,
      percentChange: 2.59,
      chartData: [],
      allData: [0.3878, 0.3878],
    },
    {
      symbol: "AFC_TL",
      lowestAsk: 58.6,
      highestBid: 58.52,
      low24hr: 57.69,
      high24hr: 60.29,
      avg24hr: 59.3,
      volume: 517842.75,
      last: 58.6,
      change: -1.4,
      percentChange: -2.33,
      chartData: [],
      allData: [58.6, 58.6],
    },
    {
      symbol: "ALGO_TL",
      lowestAsk: 4.143,
      highestBid: 4.141,
      low24hr: 4.11,
      high24hr: 4.414,
      avg24hr: 4.253,
      volume: 277699.2,
      last: 4.143,
      change: -0.271,
      percentChange: -6.14,
      chartData: [],
      allData: [4.143, 4.143],
    },
    {
      symbol: "ALICE_TL",
      lowestAsk: 30.48,
      highestBid: 30.13,
      low24hr: 29.6,
      high24hr: 35,
      avg24hr: 31.88,
      volume: 250377,
      last: 30.5,
      change: -0.49,
      percentChange: -1.58,
      chartData: [],
      allData: [30.5, 30.5],
    },
    {
      symbol: "ANKR_TL",
      lowestAsk: 0.671,
      highestBid: 0.669,
      low24hr: 0.6578,
      high24hr: 0.7247,
      avg24hr: 0.695,
      volume: 68950496,
      last: 0.669,
      change: -0.0397,
      percentChange: -5.6,
      chartData: [],
      allData: [0.669, 0.669],
    },
    {
      symbol: "APE_TL",
      lowestAsk: 83.5,
      highestBid: 83.36,
      low24hr: 80,
      high24hr: 86.2,
      avg24hr: 83.62,
      volume: 244901.531,
      last: 83.36,
      change: 0.44,
      percentChange: 0.53,
      chartData: [],
      allData: [83.36, 83.36],
    },
    {
      symbol: "APT_TL",
      lowestAsk: 228,
      highestBid: 226.02,
      low24hr: 221.27,
      high24hr: 254.98,
      avg24hr: 237.87,
      volume: 453306,
      last: 226.02,
      change: 3.02,
      percentChange: 1.35,
      chartData: [],
      allData: [226.02, 226.02],
    },
    {
      symbol: "ARB_TL",
      lowestAsk: 23.11,
      highestBid: 23.1,
      low24hr: 22.5,
      high24hr: 25.17,
      avg24hr: 23.52,
      volume: 2999895.5,
      last: 23.1,
      change: -1.45,
      percentChange: -5.91,
      chartData: [],
      allData: [23.1, 23.1],
    },
    {
      symbol: "ARG_TL",
      lowestAsk: 20.88,
      highestBid: 20.6,
      low24hr: 20.24,
      high24hr: 21.45,
      avg24hr: 20.99,
      volume: 196362.08,
      last: 20.6,
      change: -0.72,
      percentChange: -3.38,
      chartData: [],
      allData: [20.6, 20.6],
    },
    {
      symbol: "ASM_TL",
      lowestAsk: 31.6,
      highestBid: 31.4,
      low24hr: 31.02,
      high24hr: 31.98,
      avg24hr: 31.59,
      volume: 222939.92,
      last: 31.39,
      change: -0.49,
      percentChange: -1.54,
      chartData: [],
      allData: [31.39, 31.39],
    },
    {
      symbol: "ASR_TL",
      lowestAsk: 51.95,
      highestBid: 51.53,
      low24hr: 50.53,
      high24hr: 52.47,
      avg24hr: 51.52,
      volume: 71766.06,
      last: 51.95,
      change: 0.2,
      percentChange: 0.39,
      chartData: [],
      allData: [51.95, 51.95],
    },
    {
      symbol: "ATLAS_TL",
      lowestAsk: 0.063,
      highestBid: 0.0618,
      low24hr: 0.0601,
      high24hr: 0.0657,
      avg24hr: 0.0641,
      volume: 101149624,
      last: 0.0632,
      change: -0.002,
      percentChange: -3.07,
      chartData: [],
      allData: [0.0632, 0.0632],
    },
    {
      symbol: "ATM_TL",
      lowestAsk: 55.99,
      highestBid: 55.78,
      low24hr: 54.56,
      high24hr: 57.49,
      avg24hr: 55.8,
      volume: 213054.95,
      last: 55.78,
      change: 0.43,
      percentChange: 0.78,
      chartData: [],
      allData: [55.78, 55.78],
    },
    {
      symbol: "ATOM_TL",
      lowestAsk: 216.04,
      highestBid: 214.65,
      low24hr: 212.5,
      high24hr: 227,
      avg24hr: 219.51,
      volume: 31576.113,
      last: 214.95,
      change: -7.77,
      percentChange: -3.49,
      chartData: [],
      allData: [214.95, 214.95],
    },
    {
      symbol: "AUDIO_TL",
      lowestAsk: 5.369,
      highestBid: 5.335,
      low24hr: 5.29,
      high24hr: 5.575,
      avg24hr: 5.429,
      volume: 1005979.4,
      last: 5.335,
      change: -0.155,
      percentChange: -2.82,
      chartData: [],
      allData: [5.335, 5.335],
    },
    {
      symbol: "AVAX_TL",
      lowestAsk: 334.78,
      highestBid: 334.06,
      low24hr: 333,
      high24hr: 348.95,
      avg24hr: 341.31,
      volume: 92340.727,
      last: 334.4,
      change: -12.77,
      percentChange: -3.68,
      chartData: [],
      allData: [334.4, 334.4],
    },
    {
      symbol: "AVAX_USDT",
      lowestAsk: 17.14,
      highestBid: 16.95,
      low24hr: 16.93,
      high24hr: 17.81,
      avg24hr: 17.38,
      volume: 9385.584,
      last: 16.93,
      change: -0.72,
      percentChange: -4.08,
      chartData: [],
      allData: [16.93, 16.93],
    },
    {
      symbol: "AXS_TL",
      lowestAsk: 162.9,
      highestBid: 155.38,
      low24hr: 153.02,
      high24hr: 178.71,
      avg24hr: 163.59,
      volume: 11072.992,
      last: 163,
      change: -0.94,
      percentChange: -0.57,
      chartData: [],
      allData: [163, 163],
    },
    {
      symbol: "BAL_TL",
      lowestAsk: 135.98,
      highestBid: 132.09,
      low24hr: 131.1,
      high24hr: 138.33,
      avg24hr: 133.97,
      volume: 4485.714,
      last: 132,
      change: -3.3,
      percentChange: -2.44,
      chartData: [],
      allData: [132, 132],
    },
    {
      symbol: "BAND_TL",
      lowestAsk: 34.8,
      highestBid: 34.08,
      low24hr: 34.08,
      high24hr: 37.37,
      avg24hr: 35.64,
      volume: 117366.84,
      last: 34.08,
      change: -1.77,
      percentChange: -4.94,
      chartData: [],
      allData: [34.08, 34.08],
    },
    {
      symbol: "BAR_TL",
      lowestAsk: 80.4,
      highestBid: 80,
      low24hr: 75.78,
      high24hr: 85.45,
      avg24hr: 81.19,
      volume: 1241224.625,
      last: 80,
      change: 2.37,
      percentChange: 3.05,
      chartData: [],
      allData: [80, 80],
    },
    {
      symbol: "BAT_TL",
      lowestAsk: 5.159,
      highestBid: 5.114,
      low24hr: 4.902,
      high24hr: 5.7,
      avg24hr: 5.399,
      volume: 659598.8,
      last: 5.104,
      change: -0.466,
      percentChange: -8.37,
      chartData: [],
      allData: [5.104, 5.104],
    },
    {
      symbol: "BCH_TL",
      lowestAsk: 2450,
      highestBid: 2400,
      low24hr: 2400,
      high24hr: 2590,
      avg24hr: 2467.5,
      volume: 174.695,
      last: 2400,
      change: -50,
      percentChange: -2.04,
      chartData: [],
      allData: [2400, 2400],
    },
    {
      symbol: "BTC_TL",
      lowestAsk: 546800,
      highestBid: 545102,
      low24hr: 545005,
      high24hr: 558444,
      avg24hr: 552068.9,
      volume: 268.729255,
      last: 545102,
      change: -13342,
      percentChange: -2.39,
      chartData: [],
      allData: [545102, 545102],
    },
    {
      symbol: "BTC_USDT",
      lowestAsk: 27873,
      highestBid: 27601,
      low24hr: 27585,
      high24hr: 28679.99,
      avg24hr: 27954.21,
      volume: 5.140684,
      last: 27875,
      change: -295,
      percentChange: -1.05,
      chartData: [],
      allData: [27875, 27875],
    },
    {
      symbol: "BTTC_TL",
      lowestAsk: 0.00001199,
      highestBid: 0.00001197,
      low24hr: 0.00001195,
      high24hr: 0.00001232,
      avg24hr: 0.00001218,
      volume: 746679828480,
      last: 0.00001195,
      change: -2e-7,
      percentChange: -1.65,
      chartData: [],
      allData: [0.00001195, 0.00001195],
    },
    {
      symbol: "CEEK_TL",
      lowestAsk: 1.663,
      highestBid: 1.651,
      low24hr: 1.63,
      high24hr: 1.711,
      avg24hr: 1.682,
      volume: 11640868,
      last: 1.651,
      change: -0.039,
      percentChange: -2.31,
      chartData: [],
      allData: [1.651, 1.651],
    },
    {
      symbol: "CHZ_TL",
      lowestAsk: 2.3339,
      highestBid: 2.3206,
      low24hr: 2.301,
      high24hr: 2.3949,
      avg24hr: 2.3471,
      volume: 16412793,
      last: 2.3206,
      change: -0.0532,
      percentChange: -2.24,
      chartData: [],
      allData: [2.3206, 2.3206],
    },
    {
      symbol: "CITY_TL",
      lowestAsk: 89.9,
      highestBid: 89.27,
      low24hr: 88.04,
      high24hr: 90.8,
      avg24hr: 89.26,
      volume: 188407.016,
      last: 89.9,
      change: 0.92,
      percentChange: 1.03,
      chartData: [],
      allData: [89.9, 89.9],
    },
    {
      symbol: "CLV_TL",
      lowestAsk: 1.196,
      highestBid: 1.19,
      low24hr: 1.181,
      high24hr: 1.231,
      avg24hr: 1.207,
      volume: 12907664,
      last: 1.196,
      change: -0.03,
      percentChange: -2.45,
      chartData: [],
      allData: [1.196, 1.196],
    },
    {
      symbol: "COMP_TL",
      lowestAsk: 845.02,
      highestBid: 816.02,
      low24hr: 780,
      high24hr: 887,
      avg24hr: 847.8,
      volume: 523.7268,
      last: 815.01,
      change: -42.99,
      percentChange: -5.01,
      chartData: [],
      allData: [815.01, 815.01],
    },
    {
      symbol: "CRV_TL",
      lowestAsk: 17.8,
      highestBid: 17.59,
      low24hr: 17.56,
      high24hr: 18.29,
      avg24hr: 17.98,
      volume: 52694.76,
      last: 17.82,
      change: -0.14,
      percentChange: -0.78,
      chartData: [],
      allData: [17.82, 17.82],
    },
    {
      symbol: "DOGE_TL",
      lowestAsk: 1.5334,
      highestBid: 1.5273,
      low24hr: 1.502,
      high24hr: 1.66,
      avg24hr: 1.5821,
      volume: 58770596,
      last: 1.527,
      change: -0.103,
      percentChange: -6.32,
      chartData: [],
      allData: [1.527, 1.527],
    },
    {
      symbol: "DOT_TL",
      lowestAsk: 121.98,
      highestBid: 121.21,
      low24hr: 120.01,
      high24hr: 125.61,
      avg24hr: 124.13,
      volume: 11210.76,
      last: 121.11,
      change: -3.28,
      percentChange: -2.64,
      chartData: [],
      allData: [121.11, 121.11],
    },
    {
      symbol: "ENJ_TL",
      lowestAsk: 7.92,
      highestBid: 7.69,
      low24hr: 7.6,
      high24hr: 8.2,
      avg24hr: 7.927,
      volume: 205352.8,
      last: 7.93,
      change: 0.017,
      percentChange: 0.21,
      chartData: [],
      allData: [7.93, 7.93],
    },
    {
      symbol: "ENS_TL",
      lowestAsk: 259.97,
      highestBid: 256.1,
      low24hr: 250,
      high24hr: 266.7,
      avg24hr: 261.06,
      volume: 21423.045,
      last: 256,
      change: -7.11,
      percentChange: -2.7,
      chartData: [],
      allData: [256, 256],
    },
    {
      symbol: "EOS_TL",
      lowestAsk: 23.64,
      highestBid: 22.94,
      low24hr: 22.8,
      high24hr: 25,
      avg24hr: 24.05,
      volume: 285262.91,
      last: 23.22,
      change: 0.42,
      percentChange: 1.84,
      chartData: [],
      allData: [23.22, 23.22],
    },
    {
      symbol: "ETH_TL",
      lowestAsk: 35025,
      highestBid: 35000,
      low24hr: 34900,
      high24hr: 35717,
      avg24hr: 35341.69,
      volume: 338.5054,
      last: 35000,
      change: -512,
      percentChange: -1.44,
      chartData: [],
      allData: [35000, 35000],
    },
    {
      symbol: "ETH_USDT",
      lowestAsk: 1787.1,
      highestBid: 1772.33,
      low24hr: 1750,
      high24hr: 1821,
      avg24hr: 1794.14,
      volume: 114.44921,
      last: 1787.1,
      change: -27.19,
      percentChange: -1.5,
      chartData: [],
      allData: [1787.1, 1787.1],
    },
    {
      symbol: "FB_TL",
      lowestAsk: 27.89,
      highestBid: 27.82,
      low24hr: 27.53,
      high24hr: 31.9,
      avg24hr: 29.5,
      volume: 7471610.5,
      last: 27.89,
      change: -2.9,
      percentChange: -9.42,
      chartData: [],
      allData: [27.89, 27.89],
    },
    {
      symbol: "FET_TL",
      lowestAsk: 6.849,
      highestBid: 6.82,
      low24hr: 6.705,
      high24hr: 7.12,
      avg24hr: 6.954,
      volume: 6882138,
      last: 6.849,
      change: -0.271,
      percentChange: -3.81,
      chartData: [],
      allData: [6.849, 6.849],
    },
    {
      symbol: "FLR_TL",
      lowestAsk: 0.6968,
      highestBid: 0.695,
      low24hr: 0.678,
      high24hr: 0.7298,
      avg24hr: 0.6963,
      volume: 47527288,
      last: 0.6927,
      change: 0.0051,
      percentChange: 0.74,
      chartData: [],
      allData: [0.6927, 0.6927],
    },
    {
      symbol: "FTM_TL",
      lowestAsk: 8.727,
      highestBid: 8.71,
      low24hr: 8.601,
      high24hr: 9.237,
      avg24hr: 8.917,
      volume: 1311892.4,
      last: 8.727,
      change: -0.498,
      percentChange: -5.4,
      chartData: [],
      allData: [8.727, 8.727],
    },
    {
      symbol: "GALA_TL",
      lowestAsk: 0.782,
      highestBid: 0.78,
      low24hr: 0.771,
      high24hr: 0.823,
      avg24hr: 0.8003,
      volume: 24057566,
      last: 0.782,
      change: -0.0274,
      percentChange: -3.39,
      chartData: [],
      allData: [0.782, 0.782],
    },
    {
      symbol: "GAL_TL",
      lowestAsk: 92,
      highestBid: 91.9,
      low24hr: 82,
      high24hr: 99,
      avg24hr: 91.4,
      volume: 2825863,
      last: 92,
      change: 6.64,
      percentChange: 7.78,
      chartData: [],
      allData: [92, 92],
    },
    {
      symbol: "GOZ_TL",
      lowestAsk: 17.84,
      highestBid: 17.7,
      low24hr: 16.21,
      high24hr: 18.1,
      avg24hr: 17.71,
      volume: 357154.13,
      last: 17.85,
      change: -0.14,
      percentChange: -0.78,
      chartData: [],
      allData: [17.85, 17.85],
    },
    {
      symbol: "GRT_TL",
      lowestAsk: 2.715,
      highestBid: 2.7,
      low24hr: 2.659,
      high24hr: 2.819,
      avg24hr: 2.743,
      volume: 4146827.5,
      last: 2.716,
      change: -0.074,
      percentChange: -2.65,
      chartData: [],
      allData: [2.716, 2.716],
    },
    {
      symbol: "HOT_TL",
      lowestAsk: 0.03799,
      highestBid: 0.03772,
      low24hr: 0.0375,
      high24hr: 0.04037,
      avg24hr: 0.03916,
      volume: 832322880,
      last: 0.03772,
      change: -0.00226,
      percentChange: -5.65,
      chartData: [],
      allData: [0.03772, 0.03772],
    },
    {
      symbol: "ICP_TL",
      lowestAsk: 98.99,
      highestBid: 97.01,
      low24hr: 97.12,
      high24hr: 104,
      avg24hr: 100.33,
      volume: 17812.205,
      last: 97.12,
      change: -4.03,
      percentChange: -3.98,
      chartData: [],
      allData: [97.12, 97.12],
    },
    {
      symbol: "INJ_TL",
      lowestAsk: 98.8,
      highestBid: 98.21,
      low24hr: 94.55,
      high24hr: 103.94,
      avg24hr: 99.71,
      volume: 367015.41,
      last: 98.21,
      change: -3.79,
      percentChange: -3.72,
      chartData: [],
      allData: [98.21, 98.21],
    },
    {
      symbol: "INTER_TL",
      lowestAsk: 46.99,
      highestBid: 46.72,
      low24hr: 46.5,
      high24hr: 48,
      avg24hr: 47.06,
      volume: 95263.1,
      last: 47,
      change: -0.7,
      percentChange: -1.47,
      chartData: [],
      allData: [47, 47],
    },
    {
      symbol: "JUV_TL",
      lowestAsk: 50.57,
      highestBid: 50.09,
      low24hr: 49.1,
      high24hr: 50.99,
      avg24hr: 50.09,
      volume: 44437.105,
      last: 50.57,
      change: -0.34,
      percentChange: -0.67,
      chartData: [],
      allData: [50.57, 50.57],
    },
    {
      symbol: "KEEP_TL",
      lowestAsk: 3.482,
      highestBid: 3.48,
      low24hr: 3.405,
      high24hr: 3.726,
      avg24hr: 3.613,
      volume: 20781786,
      last: 3.48,
      change: -0.214,
      percentChange: -5.79,
      chartData: [],
      allData: [3.48, 3.48],
    },
    {
      symbol: "LINK_TL",
      lowestAsk: 141,
      highestBid: 140.51,
      low24hr: 140,
      high24hr: 148.2,
      avg24hr: 143.17,
      volume: 4597.41,
      last: 142.5,
      change: -3.67,
      percentChange: -2.51,
      chartData: [],
      allData: [142.5, 142.5],
    },
    {
      symbol: "LINK_USDT",
      lowestAsk: 7.35,
      highestBid: 7.15,
      low24hr: 7.2,
      high24hr: 7.65,
      avg24hr: 7.393,
      volume: 1180.6,
      last: 7.215,
      change: -0.185,
      percentChange: -2.5,
      chartData: [],
      allData: [7.215, 7.215],
    },
    {
      symbol: "LPT_TL",
      lowestAsk: 132.5,
      highestBid: 130.02,
      low24hr: 131,
      high24hr: 139.87,
      avg24hr: 138.47,
      volume: 9781.638,
      last: 132.5,
      change: -5.88,
      percentChange: -4.25,
      chartData: [],
      allData: [132.5, 132.5],
    },
    {
      symbol: "LRC_TL",
      lowestAsk: 6.951,
      highestBid: 6.941,
      low24hr: 6.842,
      high24hr: 7.45,
      avg24hr: 7.119,
      volume: 4993241,
      last: 6.951,
      change: -0.333,
      percentChange: -4.57,
      chartData: [],
      allData: [6.951, 6.951],
    },
    {
      symbol: "LTC_TL",
      lowestAsk: 1802.78,
      highestBid: 1781.5,
      low24hr: 1781.5,
      high24hr: 1855,
      avg24hr: 1820.82,
      volume: 1914.6053,
      last: 1802.84,
      change: -18.13,
      percentChange: -1,
      chartData: [],
      allData: [1802.84, 1802.84],
    },
    {
      symbol: "MANA_TL",
      lowestAsk: 11.526,
      highestBid: 11.52,
      low24hr: 11.458,
      high24hr: 12.35,
      avg24hr: 11.944,
      volume: 2528392.3,
      last: 11.52,
      change: -0.175,
      percentChange: -1.5,
      chartData: [],
      allData: [11.52, 11.52],
    },
    {
      symbol: "MATIC_TL",
      lowestAsk: 21.64,
      highestBid: 21.45,
      low24hr: 21.1,
      high24hr: 22,
      avg24hr: 21.65,
      volume: 124698,
      last: 21.67,
      change: -0.25,
      percentChange: -1.14,
      chartData: [],
      allData: [21.67, 21.67],
    },
    {
      symbol: "MINA_TL",
      lowestAsk: 14.38,
      highestBid: 14.27,
      low24hr: 14.19,
      high24hr: 15.2,
      avg24hr: 14.7,
      volume: 1325536.38,
      last: 14.27,
      change: -0.8,
      percentChange: -5.31,
      chartData: [],
      allData: [14.27, 14.27],
    },
    {
      symbol: "MIOTA_TL",
      lowestAsk: 4.216,
      highestBid: 4.152,
      low24hr: 4.113,
      high24hr: 4.347,
      avg24hr: 4.282,
      volume: 368335,
      last: 4.113,
      change: -0.187,
      percentChange: -4.35,
      chartData: [],
      allData: [4.113, 4.113],
    },
    {
      symbol: "MKR_TL",
      lowestAsk: 13121.04,
      highestBid: 13121,
      low24hr: 13100,
      high24hr: 13559,
      avg24hr: 13352.96,
      volume: 319.50119,
      last: 13121.01,
      change: -254,
      percentChange: -1.9,
      chartData: [],
      allData: [13121.01, 13121.01],
    },
    {
      symbol: "MKR_USDT",
      lowestAsk: 684.97,
      highestBid: 668.02,
      low24hr: 668.02,
      high24hr: 694,
      avg24hr: 674.51,
      volume: 12.2592,
      last: 668.02,
      change: -3.18,
      percentChange: -0.47,
      chartData: [],
      allData: [668.02, 668.02],
    },
    {
      symbol: "NAP_TL",
      lowestAsk: 121,
      highestBid: 120.1,
      low24hr: 118.55,
      high24hr: 123.79,
      avg24hr: 121.1,
      volume: 130514.164,
      last: 120.1,
      change: -3.69,
      percentChange: -2.98,
      chartData: [],
      allData: [120.1, 120.1],
    },
    {
      symbol: "NEO_TL",
      lowestAsk: 237.09,
      highestBid: 233.3,
      low24hr: 231.5,
      high24hr: 247,
      avg24hr: 238.28,
      volume: 6026.678,
      last: 233,
      change: -9.65,
      percentChange: -3.98,
      chartData: [],
      allData: [233, 233],
    },
    {
      symbol: "OGN_TL",
      lowestAsk: 2.328,
      highestBid: 2.29,
      low24hr: 2.24,
      high24hr: 2.499,
      avg24hr: 2.303,
      volume: 1979345.8,
      last: 2.348,
      change: 0.01,
      percentChange: 0.43,
      chartData: [],
      allData: [2.348, 2.348],
    },
    {
      symbol: "OMG_TL",
      lowestAsk: 29.09,
      highestBid: 29,
      low24hr: 28.5,
      high24hr: 30.97,
      avg24hr: 29.69,
      volume: 1143623.63,
      last: 29,
      change: -1.35,
      percentChange: -4.45,
      chartData: [],
      allData: [29, 29],
    },
    {
      symbol: "ONT_TL",
      lowestAsk: 4.561,
      highestBid: 4.52,
      low24hr: 4.51,
      high24hr: 4.804,
      avg24hr: 4.64,
      volume: 499240,
      last: 4.561,
      change: -0.161,
      percentChange: -3.41,
      chartData: [],
      allData: [4.561, 4.561],
    },
    {
      symbol: "OXT_TL",
      lowestAsk: 1.678,
      highestBid: 1.673,
      low24hr: 1.668,
      high24hr: 1.749,
      avg24hr: 1.717,
      volume: 2835546.8,
      last: 1.678,
      change: -0.061,
      percentChange: -3.51,
      chartData: [],
      allData: [1.678, 1.678],
    },
    {
      symbol: "POR_TL",
      lowestAsk: 19.04,
      highestBid: 18.93,
      low24hr: 18.82,
      high24hr: 19.41,
      avg24hr: 19.19,
      volume: 226864.66,
      last: 19.04,
      change: -0.37,
      percentChange: -1.91,
      chartData: [],
      allData: [19.04, 19.04],
    },
    {
      symbol: "PRB_TL",
      lowestAsk: 13.65,
      highestBid: 13.61,
      low24hr: 13.51,
      high24hr: 13.99,
      avg24hr: 13.76,
      volume: 738069.88,
      last: 13.65,
      change: -0.29,
      percentChange: -2.08,
      chartData: [],
      allData: [13.65, 13.65],
    },
    {
      symbol: "PSG_TL",
      lowestAsk: 102.97,
      highestBid: 102.95,
      low24hr: 101.5,
      high24hr: 106.4,
      avg24hr: 103.99,
      volume: 108617.078,
      last: 102.95,
      change: -2.2,
      percentChange: -2.09,
      chartData: [],
      allData: [102.95, 102.95],
    },
    {
      symbol: "QNT_TL",
      lowestAsk: 2465.17,
      highestBid: 2423.23,
      low24hr: 2391,
      high24hr: 2597.59,
      avg24hr: 2486.83,
      volume: 272.8134,
      last: 2446.61,
      change: -2.95,
      percentChange: -0.12,
      chartData: [],
      allData: [2446.61, 2446.61],
    },
    {
      symbol: "RACA_TL",
      lowestAsk: 0.00376,
      highestBid: 0.00374,
      low24hr: 0.00371,
      high24hr: 0.00395,
      avg24hr: 0.00383,
      volume: 6218293248,
      last: 0.00373,
      change: -0.00012,
      percentChange: -3.12,
      chartData: [],
      allData: [0.00373, 0.00373],
    },
    {
      symbol: "RAD_TL",
      lowestAsk: 36.48,
      highestBid: 36.17,
      low24hr: 35.01,
      high24hr: 37.12,
      avg24hr: 36.32,
      volume: 355542.94,
      last: 36.17,
      change: -0.47,
      percentChange: -1.28,
      chartData: [],
      allData: [36.17, 36.17],
    },
    {
      symbol: "REEF_TL",
      lowestAsk: 0.052,
      highestBid: 0.0519,
      low24hr: 0.0512,
      high24hr: 0.055,
      avg24hr: 0.0534,
      volume: 363006048,
      last: 0.0519,
      change: -0.0023,
      percentChange: -4.24,
      chartData: [],
      allData: [0.0519, 0.0519],
    },
    {
      symbol: "RNDR_TL",
      lowestAsk: 24.45,
      highestBid: 23.73,
      low24hr: 23.62,
      high24hr: 25.25,
      avg24hr: 24.28,
      volume: 155952.48,
      last: 23.7,
      change: -1.35,
      percentChange: -5.39,
      chartData: [],
      allData: [23.7, 23.7],
    },
    {
      symbol: "RVN_TL",
      lowestAsk: 0.4967,
      highestBid: 0.4966,
      low24hr: 0.4925,
      high24hr: 0.55,
      avg24hr: 0.5223,
      volume: 57265392,
      last: 0.4966,
      change: -0.017,
      percentChange: -3.31,
      chartData: [],
      allData: [0.4966, 0.4966],
    },
    {
      symbol: "SAND_TL",
      lowestAsk: 12,
      highestBid: 11.96,
      low24hr: 11.8,
      high24hr: 12.55,
      avg24hr: 12.24,
      volume: 426609.72,
      last: 12,
      change: -0.43,
      percentChange: -3.46,
      chartData: [],
      allData: [12, 12],
    },
    {
      symbol: "SHIB_TL",
      lowestAsk: 0.0002105,
      highestBid: 0.0002102,
      low24hr: 0.000208,
      high24hr: 0.00022199,
      avg24hr: 0.00021479,
      volume: 346711064576,
      last: 0.0002102,
      change: -0.00000984,
      percentChange: -4.47,
      chartData: [],
      allData: [0.0002102, 0.0002102],
    },
    {
      symbol: "SNX_TL",
      lowestAsk: 51.81,
      highestBid: 51,
      low24hr: 47.79,
      high24hr: 53,
      avg24hr: 50.79,
      volume: 151518.05,
      last: 51.63,
      change: 1.39,
      percentChange: 2.77,
      chartData: [],
      allData: [51.63, 51.63],
    },
    {
      symbol: "SOL_TL",
      lowestAsk: 398.59,
      highestBid: 396.21,
      low24hr: 395,
      high24hr: 415.48,
      avg24hr: 408.33,
      volume: 47912.371,
      last: 396.23,
      change: -18.55,
      percentChange: -4.47,
      chartData: [],
      allData: [396.23, 396.23],
    },
    {
      symbol: "SPELL_TL",
      lowestAsk: 0.01453,
      highestBid: 0.0145,
      low24hr: 0.0145,
      high24hr: 0.01606,
      avg24hr: 0.01543,
      volume: 1020121472,
      last: 0.0145,
      change: -0.00084,
      percentChange: -5.48,
      chartData: [],
      allData: [0.0145, 0.0145],
    },
    {
      symbol: "STG_TL",
      lowestAsk: 13.675,
      highestBid: 13.336,
      low24hr: 13.335,
      high24hr: 14.48,
      avg24hr: 14.06,
      volume: 328088.4,
      last: 13.336,
      change: -0.954,
      percentChange: -6.68,
      chartData: [],
      allData: [13.336, 13.336],
    },
    {
      symbol: "STORJ_TL",
      lowestAsk: 7.512,
      highestBid: 7.3,
      low24hr: 7.1,
      high24hr: 7.86,
      avg24hr: 7.516,
      volume: 173047.2,
      last: 7.3,
      change: -0.33,
      percentChange: -4.33,
      chartData: [],
      allData: [7.3, 7.3],
    },
    {
      symbol: "THETA_TL",
      lowestAsk: 21.3,
      highestBid: 20.45,
      low24hr: 19.67,
      high24hr: 21.92,
      avg24hr: 20.7,
      volume: 64757.68,
      last: 21,
      change: 0,
      percentChange: 0,
      chartData: [],
      allData: [21, 21],
    },
    {
      symbol: "TLM_TL",
      lowestAsk: 0.3834,
      highestBid: 0.3815,
      low24hr: 0.3806,
      high24hr: 0.4049,
      avg24hr: 0.3946,
      volume: 10412442,
      last: 0.3834,
      change: -0.0077,
      percentChange: -1.97,
      chartData: [],
      allData: [0.3834, 0.3834],
    },
    {
      symbol: "TRA_TL",
      lowestAsk: 21.36,
      highestBid: 21.26,
      low24hr: 21,
      high24hr: 21.69,
      avg24hr: 21.31,
      volume: 182044.19,
      last: 21.25,
      change: -0.31,
      percentChange: -1.44,
      chartData: [],
      allData: [21.25, 21.25],
    },
    {
      symbol: "TRX_TL",
      lowestAsk: 1.281,
      highestBid: 1.28,
      low24hr: 1.261,
      high24hr: 1.329,
      avg24hr: 1.293,
      volume: 11709524,
      last: 1.28,
      change: -0.008,
      percentChange: -0.62,
      chartData: [],
      allData: [1.28, 1.28],
    },
    {
      symbol: "TRYC_TL",
      lowestAsk: 1,
      highestBid: 0.9999,
      low24hr: 0.9999,
      high24hr: 1,
      avg24hr: 0.9999,
      volume: 897196.8,
      last: 0.9999,
      change: -0.0001,
      percentChange: -0.01,
      chartData: [],
      allData: [0.9999, 0.9999],
    },
    {
      symbol: "TVK_TL",
      lowestAsk: 0.7612,
      highestBid: 0.7611,
      low24hr: 0.7556,
      high24hr: 0.799,
      avg24hr: 0.7803,
      volume: 8965584,
      last: 0.7612,
      change: -0.0302,
      percentChange: -3.82,
      chartData: [],
      allData: [0.7612, 0.7612],
    },
    {
      symbol: "UMA_TL",
      lowestAsk: 40.47,
      highestBid: 39.94,
      low24hr: 39.63,
      high24hr: 41.68,
      avg24hr: 40.46,
      volume: 29712.64,
      last: 40.47,
      change: -1.21,
      percentChange: -2.9,
      chartData: [],
      allData: [40.47, 40.47],
    },
    {
      symbol: "UNI_TL",
      lowestAsk: 117.14,
      highestBid: 115.4,
      low24hr: 114,
      high24hr: 122,
      avg24hr: 117.87,
      volume: 3108.894,
      last: 115.4,
      change: -3.61,
      percentChange: -3.03,
      chartData: [],
      allData: [115.4, 115.4],
    },
    {
      symbol: "USDC_TL",
      lowestAsk: 19.688,
      highestBid: 19.612,
      low24hr: 19.58,
      high24hr: 19.688,
      avg24hr: 19.63,
      volume: 19940.84,
      last: 19.687,
      change: 0.107,
      percentChange: 0.55,
      chartData: [],
      allData: [19.687, 19.687],
    },
    {
      symbol: "USDT_TL",
      lowestAsk: 19.715,
      highestBid: 19.714,
      low24hr: 19.633,
      high24hr: 19.753,
      avg24hr: 19.705,
      volume: 24396694,
      last: 19.714,
      change: 0.065,
      percentChange: 0.33,
      chartData: [],
      allData: [19.714, 19.714],
    },
    {
      symbol: "VCF_TL",
      lowestAsk: 16.68,
      highestBid: 16.61,
      low24hr: 16.1,
      high24hr: 16.92,
      avg24hr: 16.61,
      volume: 231786.13,
      last: 16.7,
      change: -0.18,
      percentChange: -1.07,
      chartData: [],
      allData: [16.7, 16.7],
    },
    {
      symbol: "VET_TL",
      lowestAsk: 0.4556,
      highestBid: 0.4495,
      low24hr: 0.435,
      high24hr: 0.47,
      avg24hr: 0.4553,
      volume: 3528158,
      last: 0.4495,
      change: -0.0066,
      percentChange: -1.45,
      chartData: [],
      allData: [0.4495, 0.4495],
    },
    {
      symbol: "WAVES_TL",
      lowestAsk: 40.01,
      highestBid: 40,
      low24hr: 39.68,
      high24hr: 41.87,
      avg24hr: 40.89,
      volume: 1255300.75,
      last: 40.01,
      change: -1.73,
      percentChange: -4.14,
      chartData: [],
      allData: [40.01, 40.01],
    },
    {
      symbol: "WAVES_USDT",
      lowestAsk: 2.058,
      highestBid: 2.05,
      low24hr: 2.01,
      high24hr: 2.15,
      avg24hr: 2.079,
      volume: 29610.46,
      last: 2.05,
      change: -0.055,
      percentChange: -2.61,
      chartData: [],
      allData: [2.05, 2.05],
    },
    {
      symbol: "XLM_TL",
      lowestAsk: 2.125,
      highestBid: 2.098,
      low24hr: 1.983,
      high24hr: 2.211,
      avg24hr: 2.097,
      volume: 1227461.3,
      last: 2.097,
      change: -0.053,
      percentChange: -2.47,
      chartData: [],
      allData: [2.097, 2.097],
    },
    {
      symbol: "XLM_USDT",
      lowestAsk: 0.1088,
      highestBid: 0.1087,
      low24hr: 0.1055,
      high24hr: 0.1149,
      avg24hr: 0.1088,
      volume: 58120,
      last: 0.1087,
      change: -0.0014,
      percentChange: -1.27,
      chartData: [],
      allData: [0.1087, 0.1087],
    },
    {
      symbol: "XRP_TL",
      lowestAsk: 9.98,
      highestBid: 9.967,
      low24hr: 9.85,
      high24hr: 10.448,
      avg24hr: 10.199,
      volume: 7508903,
      last: 9.967,
      change: -0.178,
      percentChange: -1.75,
      chartData: [],
      allData: [9.967, 9.967],
    },
    {
      symbol: "XRP_USDT",
      lowestAsk: 0.5197,
      highestBid: 0.5015,
      low24hr: 0.5,
      high24hr: 0.554,
      avg24hr: 0.5217,
      volume: 156881.4,
      last: 0.5069,
      change: -0.0161,
      percentChange: -3.08,
      chartData: [],
      allData: [0.5069, 0.5069],
    },
    {
      symbol: "XTZ_TL",
      lowestAsk: 22,
      highestBid: 21.49,
      low24hr: 21.01,
      high24hr: 22.3,
      avg24hr: 21.82,
      volume: 22964.12,
      last: 21.95,
      change: -0.34,
      percentChange: -1.53,
      chartData: [],
      allData: [21.95, 21.95],
    },
    {
      symbol: "ZIL_TL",
      lowestAsk: 0.59,
      highestBid: 0.5896,
      low24hr: 0.5666,
      high24hr: 0.647,
      avg24hr: 0.6149,
      volume: 45561520,
      last: 0.5898,
      change: -0.0277,
      percentChange: -4.49,
      chartData: [],
      allData: [0.5898, 0.5898],
    },
  ]);
  const [combinedArray, setCombinedArray] = useState<CombinedCoin[]>([
    {
      symbolBinance: "BTCUSDT",
      priceBinance: 554722.207,
      symbolParibu: "BTC_TL",
      paribuHighestBid: 545102,
      paribuLowestAsk: 546800,
      id: "BTCUSDTBTC_TL",
      isBuy: true,
      buyDiff: -1.449,
      sellDiff: 1.428,
    },
    {
      symbolBinance: "ETHUSDT",
      priceBinance: 35453.742999999995,
      symbolParibu: "ETH_TL",
      paribuHighestBid: 35000,
      paribuLowestAsk: 35025,
      id: "ETHUSDTETH_TL",
      isBuy: true,
      buyDiff: -1.224,
      sellDiff: 1.209,
    },
    {
      symbolBinance: "BCHUSDT",
      priceBinance: 2499.0953,
      symbolParibu: "BCH_TL",
      paribuHighestBid: 2400,
      paribuLowestAsk: 2450,
      id: "BCHUSDTBCH_TL",
      isBuy: true,
      buyDiff: -2.004,
      sellDiff: 1.965,
    },
    {
      symbolBinance: "XRPUSDT",
      priceBinance: 10.095709,
      symbolParibu: "XRP_TL",
      paribuHighestBid: 9.967,
      paribuLowestAsk: 9.98,
      id: "XRPUSDTXRP_TL",
      isBuy: true,
      buyDiff: -1.159,
      sellDiff: 1.146,
    },
    {
      symbolBinance: "LTCUSDT",
      priceBinance: 1812.0453,
      symbolParibu: "LTC_TL",
      paribuHighestBid: 1781.5,
      paribuLowestAsk: 1802.78,
      id: "LTCUSDTLTC_TL",
      isBuy: true,
      buyDiff: -0.514,
      sellDiff: 0.511,
    },
    {
      symbolBinance: "TRXUSDT",
      priceBinance: 1.2855687,
      symbolParibu: "TRX_TL",
      paribuHighestBid: 1.28,
      paribuLowestAsk: 1.281,
      id: "TRXUSDTTRX_TL",
      isBuy: true,
      buyDiff: -0.357,
      sellDiff: 0.355,
    },
    {
      symbolBinance: "LINKUSDT",
      priceBinance: 143.25974,
      symbolParibu: "LINK_TL",
      paribuHighestBid: 140.51,
      paribuLowestAsk: 141,
      id: "LINKUSDTLINK_TL",
      isBuy: true,
      buyDiff: -1.603,
      sellDiff: 1.577,
    },
    {
      symbolBinance: "XLMUSDT",
      priceBinance: 2.1547851000000002,
      symbolParibu: "XLM_TL",
      paribuHighestBid: 2.098,
      paribuLowestAsk: 2.125,
      id: "XLMUSDTXLM_TL",
      isBuy: true,
      buyDiff: -1.402,
      sellDiff: 1.382,
    },
    {
      symbolBinance: "ADAUSDT",
      priceBinance: 7.787221,
      symbolParibu: "ADA_TL",
      paribuHighestBid: 7.62,
      paribuLowestAsk: 7.621,
      id: "ADAUSDTADA_TL",
      isBuy: true,
      buyDiff: -2.181,
      sellDiff: 2.135,
    },
    {
      symbolBinance: "ATOMUSDT",
      priceBinance: 217.63780999999997,
      symbolParibu: "ATOM_TL",
      paribuHighestBid: 214.65,
      paribuLowestAsk: 216.04,
      id: "ATOMUSDTATOM_TL",
      isBuy: true,
      buyDiff: -0.74,
      sellDiff: 0.734,
    },
    {
      symbolBinance: "ONTUSDT",
      priceBinance: 4.605198,
      symbolParibu: "ONT_TL",
      paribuHighestBid: 4.52,
      paribuLowestAsk: 4.561,
      id: "ONTUSDTONT_TL",
      isBuy: true,
      buyDiff: -0.969,
      sellDiff: 0.96,
    },
    {
      symbolBinance: "BATUSDT",
      priceBinance: 5.170542,
      symbolParibu: "BAT_TL",
      paribuHighestBid: 5.114,
      paribuLowestAsk: 5.159,
      id: "BATUSDTBAT_TL",
      isBuy: true,
      buyDiff: -0.224,
      sellDiff: 0.223,
    },
    {
      symbolBinance: "VETUSDT",
      priceBinance: 0.4616976,
      symbolParibu: "VET_TL",
      paribuHighestBid: 0.4495,
      paribuLowestAsk: 0.4556,
      id: "VETUSDTVET_TL",
      isBuy: true,
      buyDiff: -1.338,
      sellDiff: 1.321,
    },
    {
      symbolBinance: "NEOUSDT",
      priceBinance: 238.1119,
      symbolParibu: "NEO_TL",
      paribuHighestBid: 233.3,
      paribuLowestAsk: 237.09,
      id: "NEOUSDTNEO_TL",
      isBuy: true,
      buyDiff: -0.431,
      sellDiff: 0.429,
    },
    {
      symbolBinance: "THETAUSDT",
      priceBinance: 21.051212,
      symbolParibu: "THETA_TL",
      paribuHighestBid: 20.45,
      paribuLowestAsk: 21.3,
      id: "THETAUSDTTHETA_TL",
      isBuy: false,
      buyDiff: 1.168,
      sellDiff: -1.182,
    },
    {
      symbolBinance: "ZILUSDT",
      priceBinance: 0.5922371,
      symbolParibu: "ZIL_TL",
      paribuHighestBid: 0.5896,
      paribuLowestAsk: 0.59,
      id: "ZILUSDTZIL_TL",
      isBuy: true,
      buyDiff: -0.379,
      sellDiff: 0.378,
    },
    {
      symbolBinance: "COMPUSDT",
      priceBinance: 844.2862999999999,
      symbolParibu: "COMP_TL",
      paribuHighestBid: 816.02,
      paribuLowestAsk: 845.02,
      id: "COMPUSDTCOMP_TL",
      isBuy: false,
      buyDiff: 0.087,
      sellDiff: -0.087,
    },
    {
      symbolBinance: "DOGEUSDT",
      priceBinance: 1.5317289,
      symbolParibu: "DOGE_TL",
      paribuHighestBid: 1.5273,
      paribuLowestAsk: 1.5334,
      id: "DOGEUSDTDOGE_TL",
      isBuy: false,
      buyDiff: 0.109,
      sellDiff: -0.109,
    },
    {
      symbolBinance: "BANDUSDT",
      priceBinance: 35.29474,
      symbolParibu: "BAND_TL",
      paribuHighestBid: 34.08,
      paribuLowestAsk: 34.8,
      id: "BANDUSDTBAND_TL",
      isBuy: true,
      buyDiff: -1.422,
      sellDiff: 1.402,
    },
    {
      symbolBinance: "WAVESUSDT",
      priceBinance: 40.661582,
      symbolParibu: "WAVES_TL",
      paribuHighestBid: 40,
      paribuLowestAsk: 40.01,
      id: "WAVESUSDTWAVES_TL",
      isBuy: true,
      buyDiff: -1.629,
      sellDiff: 1.602,
    },
    {
      symbolBinance: "MKRUSDT",
      priceBinance: 13342.511,
      symbolParibu: "MKR_TL",
      paribuHighestBid: 13121,
      paribuLowestAsk: 13121.04,
      id: "MKRUSDTMKR_TL",
      isBuy: true,
      buyDiff: -1.688,
      sellDiff: 1.66,
    },
    {
      symbolBinance: "SNXUSDT",
      priceBinance: 51.98024,
      symbolParibu: "SNX_TL",
      paribuHighestBid: 51,
      paribuLowestAsk: 51.81,
      id: "SNXUSDTSNX_TL",
      isBuy: true,
      buyDiff: -0.329,
      sellDiff: 0.328,
    },
    {
      symbolBinance: "DOTUSDT",
      priceBinance: 124.23826999999999,
      symbolParibu: "DOT_TL",
      paribuHighestBid: 121.21,
      paribuLowestAsk: 121.98,
      id: "DOTUSDTDOT_TL",
      isBuy: true,
      buyDiff: -1.851,
      sellDiff: 1.818,
    },
    {
      symbolBinance: "BALUSDT",
      priceBinance: 132.54175999999998,
      symbolParibu: "BAL_TL",
      paribuHighestBid: 132.09,
      paribuLowestAsk: 135.98,
      id: "BALUSDTBAL_TL",
      isBuy: false,
      buyDiff: 2.528,
      sellDiff: -2.594,
    },
    {
      symbolBinance: "CRVUSDT",
      priceBinance: 17.92219,
      symbolParibu: "CRV_TL",
      paribuHighestBid: 17.59,
      paribuLowestAsk: 17.8,
      id: "CRVUSDTCRV_TL",
      isBuy: true,
      buyDiff: -0.686,
      sellDiff: 0.682,
    },
    {
      symbolBinance: "SOLUSDT",
      priceBinance: 400.53051999999997,
      symbolParibu: "SOL_TL",
      paribuHighestBid: 396.21,
      paribuLowestAsk: 398.59,
      id: "SOLUSDTSOL_TL",
      isBuy: true,
      buyDiff: -0.487,
      sellDiff: 0.484,
    },
    {
      symbolBinance: "STORJUSDT",
      priceBinance: 7.365175999999999,
      symbolParibu: "STORJ_TL",
      paribuHighestBid: 7.3,
      paribuLowestAsk: 7.512,
      id: "STORJUSDTSTORJ_TL",
      isBuy: false,
      buyDiff: 1.955,
      sellDiff: -1.993,
    },
    {
      symbolBinance: "UNIUSDT",
      priceBinance: 117.62295999999999,
      symbolParibu: "UNI_TL",
      paribuHighestBid: 115.4,
      paribuLowestAsk: 117.14,
      id: "UNIUSDTUNI_TL",
      isBuy: true,
      buyDiff: -0.412,
      sellDiff: 0.411,
    },
    {
      symbolBinance: "AVAXUSDT",
      priceBinance: 338.57824,
      symbolParibu: "AVAX_TL",
      paribuHighestBid: 334.06,
      paribuLowestAsk: 334.78,
      id: "AVAXUSDTAVAX_TL",
      isBuy: true,
      buyDiff: -1.135,
      sellDiff: 1.122,
    },
    {
      symbolBinance: "FTMUSDT",
      priceBinance: 8.786387999999999,
      symbolParibu: "FTM_TL",
      paribuHighestBid: 8.71,
      paribuLowestAsk: 8.727,
      id: "FTMUSDTFTM_TL",
      isBuy: true,
      buyDiff: -0.681,
      sellDiff: 0.676,
    },
    {
      symbolBinance: "ENJUSDT",
      priceBinance: 7.83237,
      symbolParibu: "ENJ_TL",
      paribuHighestBid: 7.69,
      paribuLowestAsk: 7.92,
      id: "ENJUSDTENJ_TL",
      isBuy: false,
      buyDiff: 1.106,
      sellDiff: -1.119,
    },
    {
      symbolBinance: "AAVEUSDT",
      priceBinance: 1450.8532999999998,
      symbolParibu: "AAVE_TL",
      paribuHighestBid: 1414.35,
      paribuLowestAsk: 1440.08,
      id: "AAVEUSDTAAVE_TL",
      isBuy: true,
      buyDiff: -0.748,
      sellDiff: 0.743,
    },
    {
      symbolBinance: "LRCUSDT",
      priceBinance: 7.033429,
      symbolParibu: "LRC_TL",
      paribuHighestBid: 6.941,
      paribuLowestAsk: 6.951,
      id: "LRCUSDTLRC_TL",
      isBuy: true,
      buyDiff: -1.186,
      sellDiff: 1.172,
    },
    {
      symbolBinance: "MATICUSDT",
      priceBinance: 21.765743999999998,
      symbolParibu: "MATIC_TL",
      paribuHighestBid: 21.45,
      paribuLowestAsk: 21.64,
      id: "MATICUSDTMATIC_TL",
      isBuy: true,
      buyDiff: -0.581,
      sellDiff: 0.578,
    },
    {
      symbolBinance: "GRTUSDT",
      priceBinance: 2.7570335,
      symbolParibu: "GRT_TL",
      paribuHighestBid: 2.7,
      paribuLowestAsk: 2.715,
      id: "GRTUSDTGRT_TL",
      isBuy: true,
      buyDiff: -1.548,
      sellDiff: 1.525,
    },
    {
      symbolBinance: "1INCHUSDT",
      priceBinance: 10.134969,
      symbolParibu: "1INCH_TL",
      paribuHighestBid: 9.9,
      paribuLowestAsk: 10.14,
      id: "1INCHUSDT1INCH_TL",
      isBuy: false,
      buyDiff: 0.05,
      sellDiff: -0.05,
    },
    {
      symbolBinance: "CHZUSDT",
      priceBinance: 2.3499073,
      symbolParibu: "CHZ_TL",
      paribuHighestBid: 2.3206,
      paribuLowestAsk: 2.3339,
      id: "CHZUSDTCHZ_TL",
      isBuy: true,
      buyDiff: -0.686,
      sellDiff: 0.681,
    },
    {
      symbolBinance: "SANDUSDT",
      priceBinance: 12.103858,
      symbolParibu: "SAND_TL",
      paribuHighestBid: 11.96,
      paribuLowestAsk: 12,
      id: "SANDUSDTSAND_TL",
      isBuy: true,
      buyDiff: -0.865,
      sellDiff: 0.858,
    },
    {
      symbolBinance: "ANKRUSDT",
      priceBinance: 0.6744868,
      symbolParibu: "ANKR_TL",
      paribuHighestBid: 0.669,
      paribuLowestAsk: 0.671,
      id: "ANKRUSDTANKR_TL",
      isBuy: true,
      buyDiff: -0.52,
      sellDiff: 0.517,
    },
    {
      symbolBinance: "REEFUSDT",
      priceBinance: 0.05276544,
      symbolParibu: "REEF_TL",
      paribuHighestBid: 0.0519,
      paribuLowestAsk: 0.052,
      id: "REEFUSDTREEF_TL",
      isBuy: true,
      buyDiff: -1.472,
      sellDiff: 1.451,
    },
    {
      symbolBinance: "RVNUSDT",
      priceBinance: 0.5119503999999999,
      symbolParibu: "RVN_TL",
      paribuHighestBid: 0.4966,
      paribuLowestAsk: 0.4967,
      id: "RVNUSDTRVN_TL",
      isBuy: true,
      buyDiff: -3.07,
      sellDiff: 2.979,
    },
    {
      symbolBinance: "MANAUSDT",
      priceBinance: 11.728925,
      symbolParibu: "MANA_TL",
      paribuHighestBid: 11.52,
      paribuLowestAsk: 11.526,
      id: "MANAUSDTMANA_TL",
      isBuy: true,
      buyDiff: -1.761,
      sellDiff: 1.73,
    },
    {
      symbolBinance: "HOTUSDT",
      priceBinance: 0.03827849999999999,
      symbolParibu: "HOT_TL",
      paribuHighestBid: 0.03772,
      paribuLowestAsk: 0.03799,
      id: "HOTUSDTHOT_TL",
      isBuy: true,
      buyDiff: -0.759,
      sellDiff: 0.754,
    },
    {
      symbolBinance: "OGNUSDT",
      priceBinance: 2.318303,
      symbolParibu: "OGN_TL",
      paribuHighestBid: 2.29,
      paribuLowestAsk: 2.328,
      id: "OGNUSDTOGN_TL",
      isBuy: false,
      buyDiff: 0.417,
      sellDiff: -0.418,
    },
    {
      symbolBinance: "AUDIOUSDT",
      priceBinance: 5.41788,
      symbolParibu: "AUDIO_TL",
      paribuHighestBid: 5.335,
      paribuLowestAsk: 5.369,
      id: "AUDIOUSDTAUDIO_TL",
      isBuy: true,
      buyDiff: -0.91,
      sellDiff: 0.902,
    },
    {
      symbolBinance: "GALAUSDT",
      priceBinance: 0.7916778999999999,
      symbolParibu: "GALA_TL",
      paribuHighestBid: 0.78,
      paribuLowestAsk: 0.782,
      id: "GALAUSDTGALA_TL",
      isBuy: true,
      buyDiff: -1.238,
      sellDiff: 1.222,
    },
    {
      symbolBinance: "LPTUSDT",
      priceBinance: 133.13066,
      symbolParibu: "LPT_TL",
      paribuHighestBid: 130.02,
      paribuLowestAsk: 132.5,
      id: "LPTUSDTLPT_TL",
      isBuy: true,
      buyDiff: -0.476,
      sellDiff: 0.474,
    },
    {
      symbolBinance: "ENSUSDT",
      priceBinance: 259.43008,
      symbolParibu: "ENS_TL",
      paribuHighestBid: 256.1,
      paribuLowestAsk: 259.97,
      id: "ENSUSDTENS_TL",
      isBuy: false,
      buyDiff: 0.208,
      sellDiff: -0.208,
    },
    {
      symbolBinance: "APEUSDT",
      priceBinance: 85.1942,
      symbolParibu: "APE_TL",
      paribuHighestBid: 83.36,
      paribuLowestAsk: 83.5,
      id: "APEUSDTAPE_TL",
      isBuy: true,
      buyDiff: -2.029,
      sellDiff: 1.989,
    },
    {
      symbolBinance: "GALUSDT",
      priceBinance: 34.664617,
      symbolParibu: "GAL_TL",
      paribuHighestBid: 91.9,
      paribuLowestAsk: 92,
      id: "GALUSDTGAL_TL",
      isBuy: false,
      buyDiff: 62.321,
      sellDiff: -165.4,
    },
    {
      symbolBinance: "INJUSDT",
      priceBinance: 106.37496999999999,
      symbolParibu: "INJ_TL",
      paribuHighestBid: 98.21,
      paribuLowestAsk: 98.8,
      id: "INJUSDTINJ_TL",
      isBuy: true,
      buyDiff: -7.667,
      sellDiff: 7.121,
    },
    {
      symbolBinance: "STGUSDT",
      priceBinance: 13.770444999999999,
      symbolParibu: "STG_TL",
      paribuHighestBid: 13.336,
      paribuLowestAsk: 13.675,
      id: "STGUSDTSTG_TL",
      isBuy: true,
      buyDiff: -0.698,
      sellDiff: 0.693,
    },
    {
      symbolBinance: "SPELLUSDT",
      priceBinance: 0.015056209999999999,
      symbolParibu: "SPELL_TL",
      paribuHighestBid: 0.0145,
      paribuLowestAsk: 0.01453,
      id: "SPELLUSDTSPELL_TL",
      isBuy: true,
      buyDiff: -3.622,
      sellDiff: 3.495,
    },
    {
      symbolBinance: "APTUSDT",
      priceBinance: 226.56946,
      symbolParibu: "APT_TL",
      paribuHighestBid: 226.02,
      paribuLowestAsk: 228,
      id: "APTUSDTAPT_TL",
      isBuy: false,
      buyDiff: 0.627,
      sellDiff: -0.631,
    },
    {
      symbolBinance: "FETUSDT",
      priceBinance: 6.958835,
      symbolParibu: "FET_TL",
      paribuHighestBid: 6.82,
      paribuLowestAsk: 6.849,
      id: "FETUSDTFET_TL",
      isBuy: true,
      buyDiff: -1.604,
      sellDiff: 1.578,
    },
    {
      symbolBinance: "RNDRUSDT",
      priceBinance: 25.430665,
      symbolParibu: "RNDR_TL",
      paribuHighestBid: 23.73,
      paribuLowestAsk: 24.45,
      id: "RNDRUSDTRNDR_TL",
      isBuy: true,
      buyDiff: -4.011,
      sellDiff: 3.856,
    },
    {
      symbolBinance: "MINAUSDT",
      priceBinance: 14.545829999999999,
      symbolParibu: "MINA_TL",
      paribuHighestBid: 14.27,
      paribuLowestAsk: 14.38,
      id: "MINAUSDTMINA_TL",
      isBuy: true,
      buyDiff: -1.153,
      sellDiff: 1.14,
    },
    {
      symbolBinance: "ARBUSDT",
      priceBinance: 23.518703,
      symbolParibu: "ARB_TL",
      paribuHighestBid: 23.1,
      paribuLowestAsk: 23.11,
      id: "ARBUSDTARB_TL",
      isBuy: true,
      buyDiff: -1.769,
      sellDiff: 1.738,
    },
    {
      symbolBinance: "TLMUSDT",
      priceBinance: 0.39024439999999994,
      symbolParibu: "TLM_TL",
      paribuHighestBid: 0.3815,
      paribuLowestAsk: 0.3834,
      id: "TLMUSDTTLM_TL",
      isBuy: true,
      buyDiff: -1.785,
      sellDiff: 1.754,
    },
  ]);
  const [selectedCoins, setSelectedCoins] = useState<GridRowSelectionModel>([]);
  const [principal, setPrincipal] = useState<string>("1000");

  function mergeArrays(
    binanceCoins: BinanceCoins[],
    paribuCoins: ParibuCoin[]
  ): CombinedCoin[] {
    if (!Array.isArray(binanceCoins) || !Array.isArray(paribuCoins)) return [];

    const mergedArray = binanceCoins.map((binanceCoin) => {
      const paribuCoin = paribuCoins.find((item) => {
        const d1 = item.symbol.split("_")[0];

        return binanceCoin.s.replace("USDT", "") === d1;
      });
      if (paribuCoin && usdttry?.c) {
        const data: CombinedCoin = {
          symbolBinance: binanceCoin.s,
          priceBinance: Number(binanceCoin.c) * Number(usdttry?.c),
          symbolParibu: paribuCoin.symbol,
          paribuHighestBid: paribuCoin.highestBid,
          paribuLowestAsk: paribuCoin.lowestAsk,
          id: binanceCoin.s + paribuCoin.symbol,
          isBuy:
            ((paribuCoin.lowestAsk -
              Number(binanceCoin.c) * Number(usdttry?.c)) *
              100) /
              paribuCoin.lowestAsk <
            -0.1,
          buyDiff: Number(
            (
              ((paribuCoin.lowestAsk -
                Number(binanceCoin.c) * Number(usdttry?.c)) *
                100) /
              paribuCoin.lowestAsk
            ).toFixed(3)
          ),
          sellDiff: Number(
            (
              ((Number(binanceCoin.c) * Number(usdttry?.c) -
                paribuCoin.lowestAsk) *
                100) /
              (Number(binanceCoin.c) * Number(usdttry?.c))
            ).toFixed(3)
          ),
        };

        return data;
      }
    });
    return mergedArray.filter((item) => item) as CombinedCoin[];
  }

  const updatePrice = (prices: any[]) => {
    console.log(prices);

    setCombinedArray((prevData) => {
      let newDataCopy = [...prevData];

      prices.forEach((newObj) => {
        const existingObj = newDataCopy.find((obj) => obj.id === newObj.id);

        if (existingObj) {
          Object.keys(newObj).forEach((key) => {
            if (newObj[key] !== undefined) {
              (existingObj as any)[key] = newObj[key];
            } else if (newObj[key] !== null) {
              (existingObj as any)[key] = null;
            }
          });

          if (existingObj.fixedBinancePrice == null) {
            existingObj.benefit = null;
          } else {
            const count = +principal / (existingObj?.fixedParibuLowestAsk ?? 0);
            const paribuProfit =
              existingObj.paribuHighestBid * count -
              (existingObj?.fixedParibuLowestAsk ?? 0) * count;
            const binanceProfit = existingObj.priceBinance * count;

            const b3 = (+existingObj.fixedBinancePrice ?? 0) * count;
            const kar = paribuProfit + (binanceProfit - b3) * -1;

            existingObj.benefit = kar;
          }
        } else {
          newDataCopy.push(newObj);
        }
      });

      return [
        ...newDataCopy.filter((x) => x.isBuy),
        ...newDataCopy.filter((x) => !x.isBuy),
      ];
    });
  };
  useEffect(() => {
    if (!paribusCoins.length || !binanceCoins.length || !usdttry) return;
    const list = mergeArrays(binanceCoins, paribusCoins).filter(
      (x) => x.buyDiff > 0 || x.buyDiff < -0.1
    );

    updatePrice(list);
  }, [usdttry, paribusCoins, binanceCoins]);

  const getParibuPrice = async () => {
    const response = await axios.get<ParibuRoot>(PARIBU_API_URL);

    const bitcoinPrice = response.data;

    const dataArray = Object.entries(bitcoinPrice).map(
      ([symbol, currency]): ParibuCoin => ({
        symbol,
        ...currency,
        allData: [currency.last],
      })
    );

    setParibuCoins((prevData) => {
      const newDataCopy = [...prevData];

      dataArray.forEach((newObj) => {
        const existingObj = newDataCopy.find(
          (obj) => obj.symbol === newObj.symbol
        );
        if (existingObj) {
          Object.assign(existingObj, newObj);
          existingObj.allData = [...existingObj.allData, ...newObj.allData];
        } else {
          newDataCopy.push(newObj);
        }
      });

      console.log(newDataCopy);

      return newDataCopy;
    });
  };

  useEffect(() => {
    const interval = setInterval(() => {
      // getParibuPrice();
    }, 1000);

    const binanceSocket = new WebSocket(BINANCE_WEBSOCKET_URL);
    binanceSocket.onopen = () => {
      console.log("WebSocket connected 2");
      const request2 = {
        method: "SUBSCRIBE",
        params: ["usdttry@ticker"],
        id: 2,
      };
      binanceSocket.send(JSON.stringify(request2));
    };

    binanceSocket.onmessage = (event) => {
      if (!event.data) return;
      const data: BinanceCoins = JSON.parse(event.data);

      setUsdttry(data);
    };

    const binanceFSSocket = new WebSocket(FS_BINANCE_WEBSOCKET_URL);

    binanceFSSocket.onopen = () => {
      console.log("WebSocket connected");
      const request = {
        method: "SUBSCRIBE",
        params: ["!miniTicker@arr"],
        id: 1,
      };
      binanceFSSocket.send(JSON.stringify(request));
    };

    binanceFSSocket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (!data) return;

      setBinanceCoins(data);
    };
    return () => {
      binanceFSSocket.close();
      binanceSocket.close();
      clearInterval(interval);
    };
  }, []);

  const handleChange = useCallback(
    (value: number) => {
      setPrincipal(value.toString());
    },
    [principal]
  );

  const columns: GridColDef[] = [
    { field: "symbolBinance", headerName: "Binance Sembol", flex: 1 },
    {
      field: "priceBinance",
      headerName: "Binance Fiyat",
      flex: 1,
      type: "number",
    },
    { field: "symbolParibu", headerName: "Paribu Sembol", flex: 1 },
    {
      field: "paribuHighestBid",
      headerName: "Paribu Sat",
      flex: 1,
      type: "number",
    },
    {
      field: "paribuLowestAsk",
      headerName: "Paribu Al",
      flex: 1,
      type: "number",
    },
    {
      field: "buyDiff",
      headerName: "Al Yzde Fark",
      flex: 1,
      type: "number",
    },
    {
      field: "sellDiff",
      headerName: "Sat Yzde Fark",
      flex: 1,
      type: "number",
    },
    { field: "isBuy", headerName: "Satn Al", flex: 1, type: "boolean" },
    {
      field: "fixedParibuLowestAsk",
      headerName: "Sabit Paribu Al",
      flex: 1,
      type: "number",
    },
    {
      field: "fixedParibuHighestBid",
      headerName: "Sabit Paribu Sat",
      flex: 1,
      type: "number",
    },
    {
      field: "fixedBinancePrice",
      headerName: "Sabit Binance Fiyat",
      flex: 1,
      type: "number",
    },
    { field: "benefit", headerName: "Kar", flex: 1, type: "number" },
  ];

  return (
    <div
      key={combinedArray.length || selectedCoins.length}
      style={{ maxWidth: "100%", height: "100vh" }}
    >
      <DataGrid
        rows={combinedArray}
        columns={columns}
        checkboxSelection
        rowSelectionModel={selectedCoins}
        onRowSelectionModelChange={(newRowSelectionModel) => {
          selectedCoins.concat(newRowSelectionModel).forEach((nr) => {
            const currentIndex = combinedArray.findIndex((c) => c.id === nr);

            const data = { ...combinedArray[currentIndex] };

            if (
              selectedCoins.includes(nr) &&
              !newRowSelectionModel.includes(nr)
            ) {
              combinedArray[currentIndex].fixedParibuHighestBid = null;
              combinedArray[currentIndex].fixedParibuLowestAsk = null;
              combinedArray[currentIndex].fixedBinancePrice = null;
            } else {
              combinedArray[currentIndex].fixedParibuHighestBid =
                data.paribuHighestBid;
              combinedArray[currentIndex].fixedParibuLowestAsk =
                data.paribuLowestAsk;
              combinedArray[currentIndex].fixedBinancePrice = data.priceBinance;
            }

            updatePrice([combinedArray[currentIndex]]);
          });

          setSelectedCoins(newRowSelectionModel);
        }}
        getRowClassName={(value) => {
          return value.row.isBuy ? "buy" : "";
        }}
        sx={{
          ".MuiDataGrid-row": {
            "&:hover": {
              backgroundColor: "hsl(120, 76%, 59%)",
            },
          },
          ".MuiDataGrid-row.Mui-selected": {
            backgroundColor: "none",
            "&:hover": {
              backgroundColor: "#3a9fbf",
            },
          },
        }}
      />
    </div>
  );
}

export default CoinTracker;
